<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ParqueoWanka</title>

    <link rel="imagen" href="imagen.css" />
    <link rel="stylesheet" href="./main.css" />
    <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
  </head>

  <body>
    <header class="header">
      <div class="admAvatar">
        <div class="admAvatar-Img">
          <img
            src="https://icongr.am/fontawesome/user.svg?size=22&color=ffffff"
            alt=""
          />
        </div>
        <div class="admAvatar-Title">
          <h2>James Scott</h2>
          <h4>james@gmail.com</h4>
        </div>
      </div>
      <div class="dropdown">
        <button class="dropdown-button">
          <img
            src="https://icongr.am/jam/menu.svg?size=32&color=000000"
            alt=""
          />
        </button>
        <ul class="dropdown-menu">
          <li>
            <a class="menu-item" href="index.html">
              <img
                src="https://icongr.am/material/home-map-marker.svg?size=20&color=4f4f4f"
                alt=""
              />Inicio
            </a>
          </li>
          <li>
            <a class="menu-item" href="">
              <img
                src="https://icongr.am/material/logout.svg?size=20&color=4f4f4f"
                alt=""
              />Cerrar sesión
            </a>
          </li>
        </ul>
      </div>
    </header>
    <section class="Sec-Act">
      <div>
        <button id="openModalBtn" class="btn-success">Crear Parqueo</button>
      </div>
      <div id="parqueosDiv" class="listparqueos"></div>
    </section>
    <div id="myModal" class="modal hidden">
      <div class="modal-div">
        <div class="modal-header">
          <h1>Crear playa de estacionamiento</h1>
          <span class="close">&times;</span>
          <h2>Crear Parqueo</h2>
          <div class="main-content">
            <div class="crud-container">         
                <table class="table">
                    <thead>
                        <tr>
                            <th for="Latitud">Latitud:</th>
                            <th for="Longitud">Longitud:</th>
                            <th for="nombre">Nombre:</th>
                            <th for="direccion">Direccion:</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="number" id="Latitud" name="Latitud" readonly><br></td>
                            <td><input type="number" id="Longitud" name="Longitud" readonly><br></td>
                            <td><input type="text" id="nombre" name="nombre"><br></td>
                            <td><input type="text" id="direccion" name="direccion"><br></td>
                        </tr>
                    </tbody>
    
                    <tr>
                        <th for="Celular">Celular:</th>
                        <th for="tipo">Tipo:</th>
                        <th for="horario">Precio:</th>
                        <th for="precio">Horario:</th>
                    </tr>
                    <tbody>
                        <tr>
                            <td><input type="tel" id="celular" name="celular"><br></td>
                            <td><select id="tipo">
                                    <option value="seleccionar">-- Seleccionar</option>
                                    <option value="techado">Techado</option>
                                    <option value="sin-techo">Sin techo</option>
                                    <option value="techado">Subterraneo</option>
                                </select></td>
                            <td><input type="text" id="precio" name="precio" value="S/."><br></td>
                            <td><input type="text" id="horario" name="horario"><br></td>
                        </tr>
    
                    </tbody>
    
                    </thead>
    
                </table>
                <th for="descripcion">Descripcion:</th>
                <td><input type="text" id="descripcion" name="descripcion"><br></td>
                <th for="descripcion">Cantidad de Espacios: </th>
                <td><input type="number" id="cantespacios" name="cantespacios"><br></td>
                <th for="descripcion">Disponibilidad:</th>
                <td>
                    <div id="disponibilidad" value="false"></div>
                    <!-- Agrega el atributo value al elemento <div> para guardar la disponibilidad -->
                    <script>
                        var cantespaciosInput = document.getElementById('cantespacios');
                        var disponibilidadDiv = document.getElementById('disponibilidad');
    
                        cantespaciosInput.addEventListener('change', function () {
                            var espaciosDisponibles = cantespaciosInput.value;
                            if (espaciosDisponibles > 0) {
                                disponibilidadDiv.textContent = 'Disponible';
                                disponibilidadDiv.classList.remove('inactivo');
                                disponibilidadDiv.classList.add('activo');
                                disponibilidadDiv.setAttribute('value', 'true'); // Establece el valor 'true' para la disponibilidad
                            } else {
                                disponibilidadDiv.textContent = 'No disponible';
                                disponibilidadDiv.classList.remove('activo');
                                disponibilidadDiv.classList.add('inactivo');
                                disponibilidadDiv.setAttribute('value', 'false'); // Establece el valor 'false' para la disponibilidad
                            }
                        });
                    </script>
                </td>
                <th for="descripcion">Subir Imagenes: </th>
                <td><input type="file" id="subirimagen" /><br></td>
                <div class="row">
                    <div class="col-md-12">
                        <div id="mapa" style="width: 100%; height: 250px"></div>
                    </div>
                </div>
    
                <script>
                    function iniciarMapa() {
                        var latitud = -12.069342;
                        var longitud = -75.211912;
    
                        coordenadas = {
                            lng: longitud,
                            lat: latitud
                        }
    
                        generarMapa(coordenadas);
    
                        function generarMapa(coordenadas) {
                            var mapa = new google.maps.Map(document.getElementById('mapa'),
                                {
                                    zoom: 13.5,
                                    center: new google.maps.LatLng(coordenadas.lat, coordenadas.lng)
                                }
                            );
    
                            marcador = new google.maps.Marker({
                                map: mapa,
                                draggable: true,
                                position: new google.maps.LatLng(coordenadas.lat, coordenadas.lng)
                            });
    
                            marcador.addListener('dragend', function (event) {
                                document.getElementById("Latitud").value = this.getPosition().lat();
                                document.getElementById("Longitud").value = this.getPosition().lng();
                            })
                        }
                    }
                </script>
                <div></div>
                <div>
                    
                </div>
            </div>
        </div>
        <div class="modal-footer">
          <button id="CancelarBtn" class="btn-cancel">Cancelar</button>
          <button id="CrearBtn" class="btn-success">Guardar</button>
        </div>
      </div>
    </div>

    <div id="myModalEdit" class="modal hidden">
      <div class="modal-div">
        <div class="modal-header">
          <h1>Actualizar playa de estacionamiento</h1>
          <span class="close">&times;</span>
          <h2>Actualizar Parqueo</h2>
          <div class="form-content ">
            <div class="coolinput">
                <label for="input" class="text">Nombre:</label>
                <input type="text" id="modalNombre" placeholder="Nombre" name="Nombre" class="input">
            </div>
            <div class="coolinput">
                <label for="input" class="text">Direccion:</label>
                <input type="text" id="modalDireccion" placeholder="Direccion" name="precio" class="input">
            </div>
            <div class="coolinput">
                <label for="input" class="text">Teléfono:</label>
                <input type="text" id="modalCelular" placeholder="Teléfono" name="precio" class="input">
            </div>
            <div class="coolinput">
                <label for="input" class="text">Descripción:</label>
                <input type="text" id="modalDescrip" placeholder="Descripción" name="precio" class="input">
            </div>
            <div class="coolinput">
                <label for="input" class="text">Horario:</label>
                <input type="text" id="modalHorario" placeholder="Horario" name="precio" class="input">
            </div>
            <div class="coolinput">
                <label for="input" class="text">Imagen:</label>
                <input type="file" id="subirimagen"  class="input"/>
            </div>
          </div>
          <div class="form-title">
            <div>3</div>
            <h3>Datos actualizables del estacionamiento</h3>
          </div>
          <div class="form-content">
            <div class="coolinput">
                <label for="input" class="text">Tarifa:</label>
                <input type="text" id="modalPrecio" placeholder="S/...." name="precio" class="input">
            </div>
            <div class="coolinput">
                <label for="input" class="text">Espacios disponibles:</label>
                <input type="number" id="modalEspacios" name="cantespacios" placeholder="1" name="input" class="input">
            </div>
            <div class="coolinput">
                <label for="input" class="text">Tipo de estacionamiento:</label>
                <select id="modalTipo">
                    <option value="seleccionar">-- Seleccionar</option>
                    <option value="techado">Techado</option>
                    <option value="sin-techo">Sin techo</option>
                    <option value="techado">Subterraneo</option>
                </select>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="" class="btn-cancel">Cancelar</button>
          <button id="modalGuardarBtn" class="btn-success">Guardar</button>
        </div>
      </div>
    </div>

    <div id="modalConfirm" class="modal hidden">
      <div class="modal-div">
        <div class="modal-header">
          <h1>Eliminar playa de estacionamiento</h1>
          <span class="close">&times;</span>
        </div>
        <div class="modal-content">
          <h2>¿Estás seguro de que deseas eliminar este parqueo?</h2>
        </div>
        <div class="modal-footer">
          <button id="btnCancelar" class="btn-cancel">Cancelar</button>
          <button id="btnAceptar" class="btn-success">Aceptar</button>
        </div>
      </div>
    </div>

    <script type="" src="./datos.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAmn7dgBjGCRulPapD4gPqSE6XQAQ7iCTg&callback=iniciarMapa"></script>
  </body>
</html>
